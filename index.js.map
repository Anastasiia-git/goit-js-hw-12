{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const getAxios = async (search, page) => {\n\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n          key: \"47508443-dec4cffb8f44668b6640702d9\",\n          q: search,\n          image_type: \"photo\",\n          orientation: \"horizontal\",\n          safesearch: true,\n          page: page,\n          per_page: 40\n      } \n  })\n\n  return response\n\n  } catch (error) {\n    console.log(error);\n  } \n}","import { getAxios } from \"./pixabay-api\";\n\nexport const createMarkup = async (search, page) => {\n    const gallery = document.querySelector(\".gallery\");\n\n    try {\n        \n        const result = await getAxios(search, page); \n        const hits = result.data.hits;\n\n        hits.forEach(hit => {      \n            const markup = `\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n                        <img\n                            class=\"gallery-image\"\n                            src=\"${hit.webformatURL}\"\n                            alt=\"${hit.tags}\"\n                        />\n                    </a>\n                    <div class=\"gal-div\">\n                    <p class=\"like\">Likes<spam>${hit.likes}</spam></p>\n                    <p class=\"like\">Views<spam>${hit.views}</spam></p>\n                    <p class=\"like\">Comments<spam>${hit.comments}</spam></p>\n                    <p class=\"like\">Downloads<spam>${hit.downloads}</spam></p>\n                    </div>\n                </li>\n            `;\n            gallery.insertAdjacentHTML('beforeend', markup);\n        })\n    \n    } catch (error) {\n        console.error(\"Error in createMarkup:\", error);\n    }}","import { createMarkup } from \"./js/render-functions\";\nimport { getAxios } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector(\".loader\")\nloader.classList.remove(\"loader\")\nconst gallery = document.querySelector(\".gallery\");\nconst form = document.querySelector(\".form\")\nconst btnLoadMore = document.querySelector(\".btnLoadMore\")\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet page = 1;\nlet currentSearch = \"\";\n\nasync function searchImages(search, page) {\n  loader.classList.add(\"loader\");\n  try {\n    const response = await getAxios(search, page);\n    const result = response.data.hits;\n    const totalHits = response.data.totalHits;\n    const perPage = response.config.params.per_page    \n    \n    if (result.length === 0) {\n      iziToast.show({\n        title: '❌',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        color: 'red',\n        position: \"topRight\"\n      });\n      btnLoadMore.classList.add(\"hidden\");\n    } \n    else {\n      btnLoadMore.classList.remove(\"hidden\");\n      const totalPages = Math.ceil(totalHits / perPage);\n        if (page >= totalPages) {\n          btnLoadMore.classList.add(\"hidden\");\n          iziToast.info({\n            title: '😢',\n            message: `We're sorry, but you've reathe end of search results.`,\n            position: \"topRight\"\n          });\n        } else {\n          btnLoadMore.classList.remove(\"hidden\");\n        }\n      }\n      \n      await createMarkup(search, page);\n      lightbox.refresh();\n\n  } catch (error) {\n      console.error(\"Error in searchImages:\", error);\n  } finally {\n      loader.classList.remove(\"loader\");\n  }\n}\n\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  const search = e.target.elements.picture.value.trim();\n\n  if (!search) {\n      return;\n  } else {\n    \n    currentSearch = search;\n    page = 1;\n    \n    gallery.innerHTML = ''\n    \n    const searchSuccessful = await searchImages(currentSearch, page);\n\n    if (searchSuccessful) {\n    e.target.reset();\n  }\n}\n});\n\n\nbtnLoadMore.addEventListener(\"click\", async (e) => {\n  e.preventDefault();\n  btnLoadMore.disabled = true;\n  page++;\n\n  const searchSuccessful = await searchImages(currentSearch, page);\n\n  searchSuccessful\n\n  const cart = document.querySelector(\".gallery-item\")\n  const cartHeight = cart.getBoundingClientRect().height    \n  \n  window.scrollBy({\n  left: 0,\n  top: cartHeight * 2 ,\n  behavior: \"smooth\"\n})\n\n  btnLoadMore.disabled = false\n});"],"names":["getAxios","search","page","axios","error","createMarkup","gallery","hit","markup","loader","form","btnLoadMore","lightbox","SimpleLightbox","currentSearch","searchImages","response","result","totalHits","perPage","iziToast","totalPages","e","cartHeight"],"mappings":"owBAEO,MAAMA,EAAW,MAAOC,EAAQC,IAAS,CAE9C,GAAI,CAaJ,OAZmB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,CACP,CAAG,CAIA,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,ECpBaC,EAAe,MAAOJ,EAAQC,IAAS,CAChD,MAAMI,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAI,EAEe,MAAMN,EAASC,EAAQC,CAAI,GACtB,KAAK,KAEpB,QAAQK,GAAO,CAChB,MAAMC,EAAS;AAAA;AAAA,oDAEyBD,EAAI,aAAa;AAAA;AAAA;AAAA,mCAGlCA,EAAI,YAAY;AAAA,mCAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,iDAIMA,EAAI,KAAK;AAAA,iDACTA,EAAI,KAAK;AAAA,oDACNA,EAAI,QAAQ;AAAA,qDACXA,EAAI,SAAS;AAAA;AAAA;AAAA,cAItDD,EAAQ,mBAAmB,YAAaE,CAAM,CAC1D,CAAS,CAEJ,OAAQJ,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,CAChD,CAAA,EC1BCK,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,cAAc,EAEzD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAC1CX,EAAO,EACPY,EAAgB,GAEpB,eAAeC,EAAad,EAAQC,EAAM,CACxCO,EAAO,UAAU,IAAI,QAAQ,EAC7B,GAAI,CACF,MAAMO,EAAW,MAAMhB,EAASC,EAAQC,CAAI,EACtCe,EAASD,EAAS,KAAK,KACvBE,EAAYF,EAAS,KAAK,UAC1BG,EAAUH,EAAS,OAAO,OAAO,SAEvC,GAAIC,EAAO,SAAW,EACpBG,EAAS,KAAK,CACZ,MAAO,IACP,QAAS,2EACT,MAAO,MACP,SAAU,UAClB,CAAO,EACDT,EAAY,UAAU,IAAI,QAAQ,MAE/B,CACHA,EAAY,UAAU,OAAO,QAAQ,EACrC,MAAMU,EAAa,KAAK,KAAKH,EAAYC,CAAO,EAC1CjB,GAAQmB,GACVV,EAAY,UAAU,IAAI,QAAQ,EAClCS,EAAS,KAAK,CACZ,MAAO,KACP,QAAS,wDACT,SAAU,UACtB,CAAW,GAEDT,EAAY,UAAU,OAAO,QAAQ,CAExC,CAED,MAAMN,EAAaJ,EAAQC,CAAI,EAC/BU,EAAS,QAAO,CAEnB,OAAQR,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,CACnD,QAAY,CACNK,EAAO,UAAU,OAAO,QAAQ,CACnC,CACH,CAGAC,EAAK,iBAAiB,SAAU,MAAOY,GAAM,CAC3CA,EAAE,eAAc,EAChB,MAAMrB,EAASqB,EAAE,OAAO,SAAS,QAAQ,MAAM,OAE/C,GAAKrB,EAIHa,EAAgBb,EAChBC,EAAO,EAEPI,EAAQ,UAAY,GAEK,MAAMS,EAAaD,EAAeZ,CAAI,GAG/DoB,EAAE,OAAO,YAXP,OAcN,CAAC,EAGDX,EAAY,iBAAiB,QAAS,MAAOW,GAAM,CACjDA,EAAE,eAAc,EAChBX,EAAY,SAAW,GACvBT,IAEyB,MAAMa,EAAaD,EAAeZ,CAAI,EAK/D,MAAMqB,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CAChB,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACZ,CAAC,EAECZ,EAAY,SAAW,EACzB,CAAC"}