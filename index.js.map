{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default getPictures;\nimport axios from 'axios';  \n\n\nasync function getPictures(tag, page, per_page) {\n\n  const API_URL = `https://pixabay.com/api`\n  const API_KEY = `47508443-dec4cffb8f44668b6640702d9`\n\n  return await axios.get(`${API_URL}/?q=${tag}&image_type=photo&orientation=horizontal&safesearch=true&key=${API_KEY}`, {\n    params: {\n      page,\n      per_page,\n    }\n\n   });\n      \n}","export default createMarkup;\n\nfunction createMarkup(arr) {\n\n    return arr.map(({webformatURL,largeImageURL,tags,likes,views,comments,downloads }) => `<li class=\"list-item\" >\n  <a href=\"${largeImageURL}\" alt=\"${tags}\" title=\"\"/>\n    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img-item\">\n  <div class=\"list-container\">\n  <p class=\"item\"><span class=\"item-text\">Likes</span> <span>${likes}</span></p>\n  <p class=\"item\"><span class=\"item-text\">Wiews</span> <span>${views}</span></p>\n  <p class=\"item\"><span class=\"item-text\">Comments</span> <span>${comments}</span></p>\n  <p class=\"item\"><span class=\"item-text\">Downlods</span> <span>${downloads}</span></p>\n  </div></a>\n</li>`).join(\"\")\n    \n} ","import getPictures from \"./js/pixabay-api\";\nimport createMarkup from \"./js/render-functions\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst litebox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'imageTitle',\n});\nconst form = document.querySelector(\".form\");\nconst list = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".more-btn\");\nconst per_page = 15;\n\nlet page = 1;\nlet totalPage = 1;\nlet value\n\nform.addEventListener(\"submit\", toSubmit);\nloadBtn.addEventListener(\"click\", onLoadMore)\n\nfunction toSubmit(evt) {\n    evt.preventDefault();\n    \n    const { picture } = evt.target.elements;\n    value = picture.value.trim();\n    \n     list.innerHTML = \"\"; \n\n    if(!value || value === \" \"){\n        { iziToast.show({\n      title:\":(\",         \n      message: \"Please add request!\",\n      position: \"center\",\n      color: \"red\"\n            });\n            }\n    }\n\n    page = 1\n    \n    loader.classList.replace(\"hidden\", \"loader\")\n    loadBtn.classList.replace(\"more-btn\", \"hidden\");\n\n    async function fetchData(value, page, per_page) {\n\n        try { \n            const { data: { hits, totalHits } } = await getPictures(value, page, per_page);\n            \n            totalPage = Math.ceil(totalHits / per_page);\n            \n            if (!hits.length) { \n                iziToast.show({\n                    title: \"X\",         \n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"center\",\n                    color: \"red\"\n                });                \n            }\n            else {\n                list.innerHTML = createMarkup(hits);\n                litebox.refresh(); \n                if (page >= totalPage ) {\n                    loadBtn.classList.replace(\"more-btn\", \"hidden\");\n                } else {\n                    loadBtn.classList.replace(\"hidden\", \"more-btn\");\n                }\n            }                    \n        } catch (error) {\n            iziToast.show({\n                title: \"X\",         \n                message: `${error.message}`,\n                position: \"center\",\n                color: \"red\"\n            });  \n        } finally {\n            loadBtn.disabled = false;\n            loader.classList.replace(\"hidden\", \"loader\");\n        }\n    }\n\n    fetchData(value, page, per_page)\n    \n}\n\nasync function onLoadMore() {\n    page += 1;\n    \n    loadBtn.disabled = true;\n    loader.classList.replace(\"hidden\", \"loader\")\n\n    try { \n        const { data: { hits, totalHits\n        } } = await getPictures(value,page,per_page);\n      \n        list.insertAdjacentHTML(\"beforeend\", createMarkup(hits));\n        totalPage = Math.ceil(totalHits / per_page);\n       \n        if (page === totalPage) {\n          \n            loadBtn.classList.replace(\"more-btn\", \"hidden\");\n              iziToast.show({\n      title:\"X\",         \n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      position: \"center\",\n      color: \"red\"\n            });  \n        }\n\n        const item = document.querySelector(\".list-item\");\n        const itemHeight = item.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: itemHeight * 2,\n            behavior: \"smooth\",\n        })\n        litebox.refresh()\n    }\n\n    catch (error) {\n        iziToast.show({\n      title:\"X\",         \n      message: `${error.message}`,\n      position: \"center\",\n      color: \"red\"\n            });  \n     }\n\n    finally {\n        loadBtn.disabled = false;\n        loader.classList.replace(\"hidden\", \"loader\")\n    }\n}\n"],"names":["getPictures","tag","page","per_page","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","litebox","SimpleLightbox","form","list","loader","loadBtn","totalPage","value","toSubmit","onLoadMore","evt","picture","iziToast","fetchData","hits","totalHits","error","itemHeight"],"mappings":"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"}