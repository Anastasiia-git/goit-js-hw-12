{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loader = document.querySelector(\".loader\")\nloader.classList.remove(\"loader\")\n\nconst btnLoadMore = document.querySelector(\".btnLoadMore\")\n\nexport const getAxios = async (search, page) => {\n  loader.classList.add(\"loader\")\n  btnLoadMore.classList.add(\"hidden\")\n\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n          key: \"47508443-dec4cffb8f44668b6640702d9\",\n          q: search,\n          image_type: \"photo\",\n          orientation: \"horizontal\",\n          safesearch: true,\n          page: page,\n          per_page: 40\n      } \n  })\n\n  const result = response.data.hits;\n  const totalHits = response.data.totalHits;\n  const perPage = response.config.params.per_page\n\n     if(result.length === 0) {       \n      iziToast.show({\n          title: '❌',\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          color: 'red',\n          position: \"topRight\"\n      })\n      return [];\n    }\n    else {\n      btnLoadMore.classList.remove(\"hidden\");\n\n      const totalPages = Math.ceil(totalHits / perPage);\n      if (page >= totalPages) {\n          btnLoadMore.classList.add(\"hidden\");\n          iziToast.info({\n              title: '😢',\n              message: `We're sorry, but you've reached the end of search results.`,\n              position: \"topRight\"\n          });\n      }\n      return result;\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.remove(\"loader\")\n  }}","import { getAxios } from \"./pixabay-api\";\n\nexport const createMarkup = async (search, page) => {\n    const gallery = document.querySelector(\".gallery\");\n\n    try {\n        \n        const hits = await getAxios(search, page); \n\n        hits.forEach(hit => {      \n            const markup = `\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n                        <img\n                            class=\"gallery-image\"\n                            src=\"${hit.webformatURL}\"\n                            alt=\"${hit.tags}\"\n                        />\n                    </a>\n                    <div class=\"gal-div\">\n                    <p class=\"like\">Likes<spam>${hit.likes}</spam></p>\n                    <p class=\"like\">Views<spam>${hit.views}</spam></p>\n                    <p class=\"like\">Comments<spam>${hit.comments}</spam></p>\n                    <p class=\"like\">Downloads<spam>${hit.downloads}</spam></p>\n                    </div>\n                </li>\n            `;\n            gallery.insertAdjacentHTML('beforeend', markup);\n        })\n    \n    } catch (error) {\n        console.error(\"Error in createMarkup:\", error);\n    }}","import { createMarkup } from \"./js/render-functions\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst form = document.querySelector(\".form\")\nconst btnLoadMore = document.querySelector(\".btnLoadMore\")\n\n let page = 1;\n let currentSearch = \"\";\n\nform.addEventListener(\"submit\", async (e) => {\n    try {\n        e.preventDefault();\n        const search = e.target.elements.picture.value.trim()\n        \n       if (!search) {\n        return\n       } else {\n\n        currentSearch = search;\n        page = 1;\n\n        gallery.innerHTML = ''\n\n        await createMarkup(currentSearch, page);\n        let lightbox = new SimpleLightbox('.gallery a');\n        lightbox.refresh();\n       }\n       \n       e.target.reset()\n    }\n    catch (error) {\n      console.log(error);\n    }\n  })\n\n  btnLoadMore.addEventListener(\"click\", async (e) => {\n    try {\n      e.preventDefault(); \n      btnLoadMore.disabled = true\n      page++; \n      await createMarkup(currentSearch, page);\n\n      let lightbox = new SimpleLightbox('.gallery a');\n      lightbox.refresh();\n\n      const cart = document.querySelector(\".gallery-item\")\n      const cartHeight = cart.getBoundingClientRect().height     \n\n      window.scrollBy({\n        left: 0,\n        top: cartHeight * 2 ,\n        behavior: \"smooth\"\n      })\n\n      btnLoadMore.disabled = false\n    }\n    catch (error) {\n      console.log(error);\n    }\n  })\n"],"names":["loader","btnLoadMore","getAxios","search","page","response","axios","result","totalHits","perPage","iziToast","totalPages","error","createMarkup","gallery","hit","markup","form","currentSearch","e","SimpleLightbox","cartHeight"],"mappings":"owBAKA,MAAMA,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,OAAO,QAAQ,EAEhC,MAAMC,EAAc,SAAS,cAAc,cAAc,EAE5CC,EAAW,MAAOC,EAAQC,IAAS,CAC9CJ,EAAO,UAAU,IAAI,QAAQ,EAC7BC,EAAY,UAAU,IAAI,QAAQ,EAElC,GAAI,CACF,MAAMI,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACJ,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,CACP,CAAG,EAEKG,EAASF,EAAS,KAAK,KACvBG,EAAYH,EAAS,KAAK,UAC1BI,EAAUJ,EAAS,OAAO,OAAO,SAEpC,GAAGE,EAAO,SAAW,EACpB,OAAAG,EAAS,KAAK,CACV,MAAO,IACP,QAAS,2EACT,MAAO,MACP,SAAU,UACpB,CAAO,EACM,GAEJ,CACHT,EAAY,UAAU,OAAO,QAAQ,EAErC,MAAMU,EAAa,KAAK,KAAKH,EAAYC,CAAO,EAChD,OAAIL,GAAQO,IACRV,EAAY,UAAU,IAAI,QAAQ,EAClCS,EAAS,KAAK,CACV,MAAO,KACP,QAAS,6DACT,SAAU,UACxB,CAAW,GAEEH,CACR,CACF,OAAQK,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRZ,EAAO,UAAU,OAAO,QAAQ,CACjC,CAAA,ECxDUa,EAAe,MAAOV,EAAQC,IAAS,CAChD,MAAMU,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAI,EAEa,MAAMZ,EAASC,EAAQC,CAAI,GAEnC,QAAQW,GAAO,CAChB,MAAMC,EAAS;AAAA;AAAA,oDAEyBD,EAAI,aAAa;AAAA;AAAA;AAAA,mCAGlCA,EAAI,YAAY;AAAA,mCAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,iDAIMA,EAAI,KAAK;AAAA,iDACTA,EAAI,KAAK;AAAA,oDACNA,EAAI,QAAQ;AAAA,qDACXA,EAAI,SAAS;AAAA;AAAA;AAAA,cAItDD,EAAQ,mBAAmB,YAAaE,CAAM,CAC1D,CAAS,CAEJ,OAAQJ,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,CAChD,CAAA,EC3BCE,EAAU,SAAS,cAAc,UAAU,EAC3CG,EAAO,SAAS,cAAc,OAAO,EACrChB,EAAc,SAAS,cAAc,cAAc,EAExD,IAAIG,EAAO,EACPc,EAAgB,GAErBD,EAAK,iBAAiB,SAAU,MAAOE,GAAM,CACzC,GAAI,CACAA,EAAE,eAAc,EAChB,MAAMhB,EAASgB,EAAE,OAAO,SAAS,QAAQ,MAAM,KAAM,EAEtD,GAAKhB,EAIJe,EAAgBf,EAChBC,EAAO,EAEPU,EAAQ,UAAY,GAEpB,MAAMD,EAAaK,EAAed,CAAI,EACvB,IAAIgB,EAAe,YAAY,EACrC,QAAO,MAVhB,QAaDD,EAAE,OAAO,MAAO,CAClB,OACMP,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAClB,CACL,CAAG,EAEDX,EAAY,iBAAiB,QAAS,MAAOkB,GAAM,CACjD,GAAI,CACFA,EAAE,eAAc,EAChBlB,EAAY,SAAW,GACvBG,IACA,MAAMS,EAAaK,EAAed,CAAI,EAEvB,IAAIgB,EAAe,YAAY,EACrC,QAAO,EAGhB,MAAMC,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,EAEDpB,EAAY,SAAW,EACxB,OACMW,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAClB,CACF,CAAA"}